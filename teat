-- Auto Megaphone + Boogie Bomb - MINIMAL (KEIN DEBUG)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local enabled = true

local function useToolByName(toolName)
	local tool = LocalPlayer.Backpack:FindFirstChild(toolName) or 
	             (LocalPlayer.Character and LocalPlayer.Character:FindFirstChild(toolName))
	if not tool then return end
	
	if tool.Parent == LocalPlayer.Backpack then
		local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum:EquipTool(tool) task.wait(0.1) end
	end
	
	tool:Activate()
end

local function useMegaphone()
	useToolByName("Megaphone")
end

local function useBoogieBomb()
	useToolByName("Boogie Bomb")
end

local function useAllTools()
	useMegaphone()
	task.wait(0.05)
	useBoogieBomb()
end

local function setup(prompt)
	if prompt.HoldDuration ~= 1.5 then return end
	
	prompt.PromptButtonHoldBegan:Connect(function(plr)
		if plr ~= LocalPlayer or not enabled then return end
		task.delay(1.2, useAllTools)
	end)
end

task.wait(2)

for _, desc in ipairs(workspace:GetDescendants()) do
	if desc:IsA("ProximityPrompt") then
		setup(desc)
	end
end

workspace.DescendantAdded:Connect(function(desc)
	if desc:IsA("ProximityPrompt") then
		task.wait(0.1)
		setup(desc)
	end
end)

game:GetService("UserInputService").InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == Enum.KeyCode.F7 then
		enabled = not enabled
	end
end)
